# 2026-2-10


## `createTreeWalker`
处理DOM的时候，可以通过 createTreeWalker 来依次判断 DOM, 满足条件后可以提前返回。

看看是否能把 `document.querySelectorAll('*')` 优化下 

```embed
title: "TreeWalker - Web API | MDN"
image: ""
description: "TreeWalker 对象用于表示文档子树中的节点和它们的位置。"
url: "https://developer.mozilla.org/zh-CN/docs/Web/API/TreeWalker"
favicon: ""
```


## 基于行为 MutationObserver 相对于 click 的优点
做翻译工具的时候，可以考虑下：
**基于行为**触发对应的事件，MutationObserver 对比于监听 click 事件的优点：
- 如果后续的界面是modal 啥的，不需要定时器判断是否出现相关的DOM，因为点击并不等于DOM真的可用，动画/异步加载期间会误判。


# 2026-2-11
## `dependencies` 新知识
以前只知道把业务逻辑用不到的库放到 devDependencies 中，然后不会把这些打包进来。

**更新下知识：**

其实如果把业务开发用的包（lodash-es）放到 devDependencies 中, 打包不会把这个 lodash-es 打包进去，如果你写的是一个库，别人用的时候也是不会自动的下载 lodash-es。

如果放到 dependencies 中，配置 external，此时也不会打包lodash-es到产物中，但别人用你这个库，可以通过库的 dependencies 直接下载lodash-es实现成功的使用。

还有也可以直接把 lodash-es 放到 devDependencies 中，不配置 external，会直接把 lodash-es 打包到产物中，别人用这个库就不用再自动下载 lodash-es 了。

# 2026-2-13
把翻译模块改成了插件系统（之前一直纠结配置文件太大，想每个模块单独的设置配置。但是这样有很多小的问题：同样的配置怎么处理，文件放哪里等）。

然后 SettingService 要**IoC**，不能直接去操作每个插件，应该是通知，每个插件去相应。

其实就像 Obsidian 一样，应该是一个**插件市场**，每个插件互不影响。然后统一从 App 调取配置、api等，配置文件大了是合理的。

❓ModalInputModule 用了 InputModule，这个怎么处理需要好好的想一下
